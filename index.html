<!doctype html>
<html lang="ar" dir="rtl" class="h-full">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ø¨Ø£Ù†Ø§Ù…Ù„ ØªØ±ÙŠÙ…</title>

    <script src="https://cdn.tailwindcss.com/3.4.17"></script>

    <link
      href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />

    <style>
      * {
        font-family: "Cairo", sans-serif;
      }

      .school-logo {
        height: 120px;
        object-fit: contain;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
      }

      .book-card {
        transition: all 0.3s ease;
      }
      .book-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
      }

      .category-btn {
        transition: all 0.3s ease;
      }
      .category-btn:hover,
      .category-btn.active {
        background: linear-gradient(135deg, #1a4d3e 0%, #2d6a4f 100%);
        color: white;
        transform: scale(1.05);
      }

      .golden-accent {
        background: linear-gradient(135deg, #d4a853 0%, #f4d03f 50%, #d4a853 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .btn-primary {
        background: linear-gradient(135deg, #1a4d3e 0%, #2d6a4f 100%);
        transition: all 0.3s ease;
      }
      .btn-primary:hover {
        background: linear-gradient(135deg, #0d3d2e 0%, #1a5a3f 100%);
        transform: scale(1.02);
      }

      .btn-secondary {
        background: linear-gradient(135deg, #d4a853 0%, #c9a227 100%);
        transition: all 0.3s ease;
      }
      .btn-secondary:hover {
        background: linear-gradient(135deg, #c9a227 0%, #b8941f 100%);
        transform: scale(1.02);
      }

      .hero-pattern {
        background-color: #f5f0e6;
        background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%231a4d3e' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
      }

      .paper-texture {
        background: linear-gradient(135deg, #faf8f3 0%, #f5f0e6 50%, #ebe5d9 100%);
      }

      .book-cover {
        background: linear-gradient(145deg, #1a4d3e 0%, #2d6a4f 30%, #1a4d3e 100%);
        position: relative;
        overflow: hidden;
      }
      .book-cover::before {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);
      }

      .pdf-viewer {
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
      }

      .modal-overlay {
        backdrop-filter: blur(8px);
        background: rgba(0, 0, 0, 0.6);
      }

      .search-box {
        transition: all 0.3s ease;
      }
      .search-box:focus-within {
        box-shadow: 0 8px 30px rgba(26, 77, 62, 0.2);
        transform: scale(1.01);
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .animate-fade-in {
        animation: fadeIn 0.5s ease-out forwards;
      }

      @keyframes float {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-10px);
        }
      }
      .animate-float {
        animation: float 3s ease-in-out infinite;
      }

      .scrollbar-thin::-webkit-scrollbar {
        width: 6px;
      }
      .scrollbar-thin::-webkit-scrollbar-track {
        background: #f5f0e6;
      }
      .scrollbar-thin::-webkit-scrollbar-thumb {
        background: #1a4d3e;
        border-radius: 3px;
      }

      body {
        box-sizing: border-box;
      }
    </style>
  </head>

  <body class="h-full paper-texture">
    <div id="app" class="h-full overflow-auto scrollbar-thin">
      <div class="bg-white/95 backdrop-blur-md border-b-2 border-[#1a4d3e]/20 py-4 px-4 text-center">
        <img
          src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSiV_IUSCtpvRMxWNDQDLPQsXGVmqPrqYLJHg&s"
          alt="Ø´Ø¹Ø§Ø± Ù…Ø¯Ø±Ø³Ø© ØªØ±ÙŠÙ…"
          class="school-logo mx-auto"
          loading="lazy"
          onerror="console.error('School logo failed to load:', this.src); this.style.display='none';"
        />
      </div>

      <nav class="sticky top-0 z-50 bg-white/95 backdrop-blur-md shadow-sm border-b border-[#1a4d3e]/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="flex items-center justify-between h-16">
            <div class="flex items-center gap-3 cursor-pointer" onclick="showHome()">
              <div
                class="w-10 h-10 rounded-lg bg-gradient-to-br from-[#1a4d3e] to-[#2d6a4f] flex items-center justify-center shadow-lg"
              >
                <svg class="w-6 h-6 text-[#d4a853]" fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"
                  />
                </svg>
              </div>
              <div>
                <h1 id="nav-title" class="text-lg font-bold text-[#1a4d3e]">Ø¨Ø£Ù†Ø§Ù…Ù„ ØªØ±ÙŠÙ…</h1>
                <p class="text-xs text-[#666] -mt-1">Ù…Ù†Ø´Ø¦ Ø§Ù„Ù…ÙˆÙ‚Ø¹: Ø¹Ù…Ø± Ø¹Ø§Ø¯Ù„ Ù¡Ù¡B</p>
              </div>
            </div>

            <div class="hidden md:flex items-center gap-6">
              <a href="#" onclick="showHome(); return false;" class="text-[#1a4d3e] hover:text-[#d4a853] transition-colors font-medium"
                >Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a
              >
              <a
                href="#"
                onclick="filterByCategory('all'); return false;"
                class="text-[#1a4d3e] hover:text-[#d4a853] transition-colors font-medium"
                >Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØªØ¨</a
              >
              <a href="#categories" class="text-[#1a4d3e] hover:text-[#d4a853] transition-colors font-medium">Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</a>
            </div>

            <button onclick="toggleMobileMenu()" class="md:hidden p-2 rounded-lg hover:bg-[#f5f0e6] transition-colors">
              <svg class="w-6 h-6 text-[#1a4d3e]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
              </svg>
            </button>
          </div>
        </div>

        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-[#1a4d3e]/10 px-4 py-3">
          <a href="#" onclick="showHome(); toggleMobileMenu(); return false;" class="block py-2 text-[#1a4d3e] font-medium">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
          <a
            href="#"
            onclick="filterByCategory('all'); toggleMobileMenu(); return false;"
            class="block py-2 text-[#1a4d3e] font-medium"
            >Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØªØ¨</a
          >
          <a href="#categories" onclick="toggleMobileMenu()" class="block py-2 text-[#1a4d3e] font-medium">Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</a>
        </div>
      </nav>

      <main id="main-content">
        <section id="hero-section" class="hero-pattern py-12 md:py-20">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row items-center gap-8 md:gap-12">
              <div class="flex-1 text-center md:text-right animate-fade-in">
                <div
                  class="inline-flex items-center gap-2 bg-[#1a4d3e]/10 text-[#1a4d3e] px-4 py-2 rounded-full text-sm font-medium mb-6"
                >
                  Ù…ÙƒØªØ¨Ø© Ù…Ø¯Ø±Ø³ÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ©
                </div>

                <h1 id="hero-title" class="text-4xl md:text-5xl lg:text-6xl font-extrabold text-[#1a4d3e] mb-4 leading-tight">
                  <span class="golden-accent">Ø¨Ø£Ù†Ø§Ù…Ù„ ØªØ±ÙŠÙ…</span>
                </h1>

                <p id="hero-description" class="text-lg md:text-xl text-[#555] mb-8 max-w-xl mx-auto md:mx-0">
                  Ù…Ù†ØµØ© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ù„Ù‚Ø±Ø§Ø¡Ø© ÙˆØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚ØµØµ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ù…Ù…ÙŠØ²Ø© Ù„Ù„Ø·Ù„Ø§Ø¨ ÙˆØ§Ù„Ø£Ø·ÙØ§Ù„. Ø§ÙƒØªØ´Ù Ø¹Ø§Ù„Ù…Ø§Ù‹ Ù…Ù† Ø§Ù„Ù…ØºØ§Ù…Ø±Ø§Øª ÙˆØ§Ù„Ù…Ø¹Ø±ÙØ©!
                </p>

                <div
                  class="search-box flex items-center gap-2 bg-white rounded-2xl p-2 shadow-lg max-w-lg mx-auto md:mx-0 border border-[#1a4d3e]/10"
                >
                  <div class="flex-1 flex items-center gap-3 px-3">
                    <svg class="w-5 h-5 text-[#999]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                      />
                    </svg>
                    <input
                      type="text"
                      id="search-input"
                      placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙƒØªØ§Ø¨ Ø£Ùˆ Ù…Ø¤Ù„Ù..."
                      class="flex-1 py-3 bg-transparent outline-none text-[#333] placeholder-[#999]"
                      oninput="handleSearch(this.value)"
                    />
                  </div>
                  <button
                    onclick="handleSearch(document.getElementById('search-input').value)"
                    class="btn-primary text-white px-6 py-3 rounded-xl font-medium"
                  >
                    Ø¨Ø­Ø«
                  </button>
                </div>

                <div class="flex items-center justify-center md:justify-start gap-8 mt-8">
                  <div class="text-center">
                    <div class="text-2xl font-bold text-[#1a4d3e]">6+</div>
                    <div class="text-sm text-[#666]">ÙƒØªØ§Ø¨ Ù…ØªØ§Ø­</div>
                  </div>
                  <div class="w-px h-10 bg-[#1a4d3e]/20"></div>
                  <div class="text-center">
                    <div class="text-2xl font-bold text-[#1a4d3e]">3</div>
                    <div class="text-sm text-[#666]">ØªØµÙ†ÙŠÙØ§Øª</div>
                  </div>
                  <div class="w-px h-10 bg-[#1a4d3e]/20"></div>
                  <div class="text-center">
                    <div class="text-2xl font-bold text-[#d4a853]">Ù…Ø¬Ø§Ù†ÙŠ</div>
                    <div class="text-sm text-[#666]">Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</div>
                  </div>
                </div>
              </div>

              <div class="flex-1 flex justify-center animate-float">
                <div class="relative">
                  <div class="relative w-64 h-80 md:w-80 md:h-96">
                    <div
                      class="absolute bottom-0 right-0 w-48 h-64 bg-gradient-to-br from-[#1a4d3e] to-[#2d6a4f] rounded-lg shadow-2xl transform rotate-6 flex items-center justify-center"
                    >
                      <div class="text-center p-4">
                        <div class="text-white text-sm font-bold">Ù‚ØµØµ Ù…Ø¯Ø±Ø³ÙŠØ©</div>
                      </div>
                    </div>
                    <div
                      class="absolute bottom-4 right-8 w-48 h-64 bg-gradient-to-br from-[#d4a853] to-[#c9a227] rounded-lg shadow-2xl transform -rotate-3 flex items-center justify-center"
                    >
                      <div class="text-center p-4">
                        <div class="text-white text-sm font-bold">Ø®ÙŠØ§Ù„ ÙˆÙ…ØºØ§Ù…Ø±Ø§Øª</div>
                      </div>
                    </div>
                    <div
                      class="absolute bottom-8 right-16 w-48 h-64 bg-gradient-to-br from-[#4a9079] to-[#3d7a66] rounded-lg shadow-2xl transform rotate-2 flex items-center justify-center"
                    >
                      <div class="text-center p-4">
                        <div class="text-white text-sm font-bold">Ù‚ØµØµ Ø¨ÙŠØ¦ÙŠØ©</div>
                      </div>
                    </div>

                    <div class="absolute -top-4 -left-4 w-8 h-8 bg-[#d4a853] rounded-full opacity-60 animate-pulse"></div>
                    <div
                      class="absolute top-1/4 -left-8 w-6 h-6 bg-[#1a4d3e] rounded-full opacity-40 animate-pulse"
                      style="animation-delay: 0.5s"
                    ></div>
                    <div
                      class="absolute -bottom-2 left-1/4 w-10 h-10 bg-[#4a9079] rounded-full opacity-50 animate-pulse"
                      style="animation-delay: 1s"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="categories" class="py-12 bg-white">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-10">
              <h2 class="text-3xl font-bold text-[#1a4d3e] mb-3">Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</h2>
              <p class="text-[#666]">Ø§Ø®ØªØ± Ø§Ù„ØªØµÙ†ÙŠÙ Ø§Ù„Ø°ÙŠ ÙŠÙ†Ø§Ø³Ø¨Ùƒ ÙˆØ§Ø³ØªÙ…ØªØ¹ Ø¨Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</p>
            </div>

            <div class="flex flex-wrap justify-center gap-4" id="category-buttons">
              <button
                onclick="filterByCategory('all')"
                class="category-btn active flex items-center gap-3 px-6 py-4 rounded-2xl bg-white border-2 border-[#1a4d3e]/20 font-medium text-[#1a4d3e]"
                data-category="all"
              >
                Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØªØ¨
              </button>

              <button
                onclick="filterByCategory('school')"
                class="category-btn flex items-center gap-3 px-6 py-4 rounded-2xl bg-white border-2 border-[#1a4d3e]/20 font-medium text-[#1a4d3e]"
                data-category="school"
              >
                Ù‚ØµØµ Ù…Ø¯Ø±Ø³ÙŠØ©
              </button>

              <button
                onclick="filterByCategory('adventure')"
                class="category-btn flex items-center gap-3 px-6 py-4 rounded-2xl bg-white border-2 border-[#1a4d3e]/20 font-medium text-[#1a4d3e]"
                data-category="adventure"
              >
                Ø®ÙŠØ§Ù„ ÙˆÙ…ØºØ§Ù…Ø±Ø§Øª
              </button>

              <button
                onclick="filterByCategory('environmental')"
                class="category-btn flex items-center gap-3 px-6 py-4 rounded-2xl bg-white border-2 border-[#1a4d3e]/20 font-medium text-[#1a4d3e]"
                data-category="environmental"
              >
                Ù‚ØµØµ Ø¨ÙŠØ¦ÙŠØ© ÙˆØªÙˆØ¹ÙˆÙŠØ©
              </button>
            </div>
          </div>
        </section>

        <section id="books-section" class="py-12 hero-pattern">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between mb-10">
              <div>
                <h2 id="section-title" class="text-3xl font-bold text-[#1a4d3e] mb-2">Ø£Ø­Ø¯Ø« Ø§Ù„ÙƒØªØ¨</h2>
                <p class="text-[#666]">Ø§ÙƒØªØ´Ù Ù…Ø¬Ù…ÙˆØ¹ØªÙ†Ø§ Ø§Ù„Ù…Ù…ÙŠØ²Ø© Ù…Ù† Ø§Ù„Ù‚ØµØµ ÙˆØ§Ù„ÙƒØªØ¨</p>
              </div>
              <div class="hidden md:block text-sm text-[#666]">
                Ø¹Ø±Ø¶ <span id="books-count" class="font-bold text-[#1a4d3e]">6</span> ÙƒØªØ¨
              </div>
            </div>

            <div id="books-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"></div>

            <div id="no-results" class="hidden text-center py-16">
              <h3 class="text-xl font-bold text-[#666] mb-2">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬</h3>
              <p class="text-[#999]">Ø¬Ø±Ù‘Ø¨ Ø§Ù„Ø¨Ø­Ø« Ø¨ÙƒÙ„Ù…Ø§Øª Ù…Ø®ØªÙ„ÙØ© Ø£Ùˆ ØªØµÙØ­ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</p>
            </div>
          </div>
        </section>
      </main>

      <div id="book-modal" class="fixed inset-0 z-50 hidden">
        <div class="modal-overlay absolute inset-0" onclick="closeModal()"></div>
        <div class="relative h-full flex items-center justify-center p-4">
          <div class="bg-white rounded-3xl shadow-2xl w-full max-w-4xl max-h-[90%] overflow-hidden animate-fade-in">
            <div class="sticky top-0 bg-white z-10 flex items-center justify-between p-4 border-b border-[#eee]">
              <h3 id="modal-title" class="text-xl font-bold text-[#1a4d3e]">ØªÙØ§ØµÙŠÙ„ Ø§Ù„ÙƒØªØ§Ø¨</h3>
              <button onclick="closeModal()" class="p-2 rounded-full hover:bg-[#f5f0e6] transition-colors">âœ•</button>
            </div>
            <div class="overflow-auto p-6" style="max-height: calc(90vh - 80px)">
              <div id="modal-content"></div>
            </div>
          </div>
        </div>
      </div>

      <footer class="bg-[#1a4d3e] text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <div>
              <div class="flex items-center gap-3 mb-4">
                <span class="text-lg font-bold">Ø¨Ø£Ù†Ø§Ù…Ù„ ØªØ±ÙŠÙ…</span>
              </div>
              <p class="text-white/70 text-sm leading-relaxed">
                Ù…Ù†ØµØ© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ù…Ø¬Ø§Ù†ÙŠØ© ØªÙ‡Ø¯Ù Ø¥Ù„Ù‰ Ù†Ø´Ø± Ø«Ù‚Ø§ÙØ© Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© Ø¨ÙŠÙ† Ø§Ù„Ø·Ù„Ø§Ø¨ ÙˆØ§Ù„Ø£Ø·ÙØ§Ù„ Ù…Ù† Ø®Ù„Ø§Ù„ ØªÙˆÙÙŠØ± Ù…Ø¬Ù…ÙˆØ¹Ø© Ù…ØªÙ†ÙˆØ¹Ø© Ù…Ù† Ø§Ù„Ù‚ØµØµ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ù‡Ø§Ø¯ÙØ©.
              </p>
              <p class="text-white/80 text-sm mt-3">Ù…Ù†Ø´Ø¦ Ø§Ù„Ù…ÙˆÙ‚Ø¹: Ø¹Ù…Ø± Ø¹Ø§Ø¯Ù„ Ù¡Ù¡B</p>
            </div>

            <div>
              <h4 class="font-bold mb-4 text-[#d4a853]">Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©</h4>
              <ul class="space-y-2">
                <li>
                  <a href="#" onclick="showHome(); return false;" class="text-white/70 hover:text-white transition-colors text-sm">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
                </li>
                <li>
                  <a href="#" onclick="filterByCategory('all'); return false;" class="text-white/70 hover:text-white transition-colors text-sm"
                    >Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØªØ¨</a
                  >
                </li>
                <li><a href="#categories" class="text-white/70 hover:text-white transition-colors text-sm">Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</a></li>
              </ul>
            </div>

            <div>
              <h4 class="font-bold mb-4 text-[#d4a853]">ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§</h4>
              <div class="space-y-3">
                <div class="text-white/70 text-sm">info@trimlib.edu</div>
                <div class="text-white/70 text-sm">Ù…Ø¯Ø±Ø³Ø© ØªØ±ÙŠÙ… - Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª</div>
              </div>
            </div>
          </div>

          <div class="border-t border-white/20 mt-8 pt-8 text-center">
            <p class="text-white/50 text-sm">Â© 2024 Ø¨Ø£Ù†Ø§Ù…Ù„ ØªØ±ÙŠÙ…. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
          </div>
        </div>
      </footer>
    </div>

    <script>
      function extractDriveId(url) {
        if (!url) return null;
        const m1 = url.match(/\/file\/d\/([a-zA-Z0-9_-]+)/);
        if (m1 && m1[1]) return m1[1];
        const m2 = url.match(/[?&]id=([a-zA-Z0-9_-]+)/);
        if (m2 && m2[1]) return m2[1];
        const m3 = url.match(/\/uc\?id=([a-zA-Z0-9_-]+)/);
        if (m3 && m3[1]) return m3[1];
        return null;
      }

      function toDrivePreviewUrl(anyDriveUrl) {
        const id = extractDriveId(anyDriveUrl);
        return id ? `https://drive.google.com/file/d/${id}/preview` : anyDriveUrl;
      }

      function toDriveDownloadUrl(anyDriveUrl) {
        const id = extractDriveId(anyDriveUrl);
        return id ? `https://drive.google.com/uc?export=download&id=${id}` : anyDriveUrl;
      }

      function toDriveViewUrl(anyDriveUrl) {
        const id = extractDriveId(anyDriveUrl);
        return id ? `https://drive.google.com/file/d/${id}/view` : anyDriveUrl;
      }

      const books = [
        {
          id: 1,
          title: "Ù‚ØµØ© Ø§Ù„Ø·Ø§Ù„Ø¨Ø© Ø§Ù„Ø±ÙŠÙ…",
          author: "Ø±ÙŠÙ…",
          category: "school",
          categoryName: "Ù‚ØµØµ Ù…Ø¯Ø±Ø³ÙŠØ©",
          description:
            "Ù‚ØµØ© Ù…Ù„Ù‡Ù…Ø© Ø¹Ù† Ø·Ø§Ù„Ø¨Ø© Ù…ØªÙÙˆÙ‚Ø© ØªÙˆØ§Ø¬Ù‡ ØªØ­Ø¯ÙŠØ§Øª Ø§Ù„Ø­ÙŠØ§Ø© Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ© Ø¨Ø´Ø¬Ø§Ø¹Ø© ÙˆØ¥ØµØ±Ø§Ø±ØŒ ÙˆØªØªØ¹Ù„Ù… Ù‚ÙŠÙ… Ø§Ù„ØµØ¯Ø§Ù‚Ø© ÙˆØ§Ù„Ù…Ø«Ø§Ø¨Ø±Ø©.",
          coverColor: "from-[#1a4d3e] to-[#2d6a4f]",
          icon: "ğŸ“š",
          pdfUrl: "https://drive.google.com/file/d/1290wU9bg8qcL3e6x-O6J8vYAm9tpmkbO/preview",
        },
        {
          id: 2,
          title: "Ù†ÙˆØ± Ø§Ù„Ø£Ù…Ù„",
          author: "Ø¨Ø·ÙŠ ÙŠÙˆØ³Ù",
          category: "school",
          categoryName: "Ù‚ØµØµ Ù…Ø¯Ø±Ø³ÙŠØ©",
          description: "Ù‚ØµØ© ØªØ¹Ù„ÙŠÙ…ÙŠØ© ØªØ­ÙƒÙŠ Ø¹Ù† Ø§Ù„Ø£Ù…Ù„ ÙˆØ§Ù„ØªÙØ§Ø¤Ù„ ÙÙŠ Ù…ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØµØ¹ÙˆØ¨Ø§ØªØŒ ÙˆÙƒÙŠÙ ÙŠÙ…ÙƒÙ† Ù„Ù„Ø¥ÙŠÙ…Ø§Ù† Ø¨Ø§Ù„Ù†ÙØ³ Ø£Ù† ÙŠØºÙŠØ± Ø­ÙŠØ§ØªÙ†Ø§.",
          coverColor: "from-[#4a9079] to-[#3d7a66]",
          icon: "âœ¨",
          pdfUrl: "https://drive.google.com/file/d/1ZfLYIx4tnMIZ22R9G08ZkNDC5OH__EVB/preview",
        },
        {
          id: 3,
          title: "Ø±Ø­Ù„Ø© Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„",
          author: "Ø£Ø­Ù…Ø¯ Ø²Ù†Ø¯Ø§Ø­",
          category: "adventure",
          categoryName: "Ø®ÙŠØ§Ù„ ÙˆÙ…ØºØ§Ù…Ø±Ø§Øª",
          description: "Ù…ØºØ§Ù…Ø±Ø© Ø®ÙŠØ§Ù„ÙŠØ© Ù…Ø«ÙŠØ±Ø© ØªØ£Ø®Ø° Ø§Ù„Ù‚Ø§Ø±Ø¦ ÙÙŠ Ø±Ø­Ù„Ø© Ø¹Ø¨Ø± Ø§Ù„Ø²Ù…Ù† Ù„Ø§Ø³ØªÙƒØ´Ø§Ù Ø¹Ø§Ù„Ù… Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ Ø§Ù„Ù…Ø°Ù‡Ù„ ÙˆØªÙ‚Ù†ÙŠØ§ØªÙ‡ Ø§Ù„Ù…ØªØ·ÙˆØ±Ø©.",
          coverColor: "from-[#d4a853] to-[#c9a227]",
          icon: "ğŸš€",
          pdfUrl: "https://drive.google.com/file/d/18x1plfUCf3SrgfiXxq4kE8hQX0_iB8eo/preview",
        },
        {
          id: 4,
          title: "Ø¹Ø¨Ø¯ Ø§Ù„Ù„Ù‡ ÙˆØ±Ø­Ù„Ø© Ø§Ù„Ø®ÙŠØ§Ù„ Ù„Ø¥Ù†Ù‚Ø§Ø° Ø§Ù„ÙˆØ§Ù‚Ø¹",
          author: "Ø£Ø­Ù…Ø¯ Ø²Ù†Ø¯Ø§Ø­",
          category: "adventure",
          categoryName: "Ø®ÙŠØ§Ù„ ÙˆÙ…ØºØ§Ù…Ø±Ø§Øª",
          description: "Ù‚ØµØ© Ù…Ø´ÙˆÙ‚Ø© Ø¹Ù† ØµØ¨ÙŠ ÙŠØ¯Ø®Ù„ Ø¹Ø§Ù„Ù… Ø§Ù„Ø®ÙŠØ§Ù„ Ù„ÙŠÙˆØ§Ø¬Ù‡ ØªØ­Ø¯ÙŠØ§Øª ÙƒØ¨ÙŠØ±Ø© ÙˆÙŠØªØ¹Ù„Ù… Ø¯Ø±ÙˆØ³Ø§Ù‹ Ù‚ÙŠÙ…Ø© Ø¹Ù† Ø§Ù„Ø´Ø¬Ø§Ø¹Ø© ÙˆØ§Ù„Ø¥Ø¨Ø¯Ø§Ø¹.",
          coverColor: "from-[#6b5b95] to-[#5a4a84]",
          icon: "ğŸŒŸ",
          pdfUrl: "https://drive.google.com/file/d/13anuTAEO4Xq_j53tx-UOj5h3DVm0B4rq/preview",
        },
        {
          id: 5,
          title: "Ø³Ù„Ø§Ø­Ù Ø§Ù„Ø´Ø§Ø·Ø¦",
          author: "Ø§Ø­Ù…Ø¯ Ø§Ø³Ù…Ø§Ø¹ÙŠÙ„ Ø²Ù†Ø¯Ø§Ø­",
          category: "environmental",
          categoryName: "Ù‚ØµØµ Ø¨ÙŠØ¦ÙŠØ© ÙˆØªÙˆØ¹ÙˆÙŠØ©",
          description: "Ù‚ØµØ© ØªÙˆØ¹ÙˆÙŠØ© Ø¬Ù…ÙŠÙ„Ø© Ø¹Ù† Ø£Ù‡Ù…ÙŠØ© Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø³Ù„Ø§Ø­Ù Ø§Ù„Ø¨Ø­Ø±ÙŠØ© ÙˆØ§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¨Ø­Ø±ÙŠØ© Ù„Ù„Ø£Ø¬ÙŠØ§Ù„ Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©.",
          coverColor: "from-[#3498db] to-[#2980b9]",
          icon: "ğŸ¢",
          pdfUrl: "https://drive.google.com/file/d/1c0vBSAee68USJ0GA3vogzyPOGmus2dDm/preview",
        },
        {
          id: 6,
          title: "ØªØ­Øª Ø¸Ù„ Ù†Ø®Ù„Ø©â€¦ Ø±Ø³Ù…Øª Ø­Ù„Ù…Ø§Ù‹",
          author: "Ù„Ø·ÙŠÙØ©",
          category: "environmental",
          categoryName: "Ù‚ØµØµ Ø¨ÙŠØ¦ÙŠØ© ÙˆØªÙˆØ¹ÙˆÙŠØ©",
          description: "Ù‚ØµØ© Ù…Ù„Ù‡Ù…Ø© Ø¹Ù† Ø§Ù„Ø¹Ù„Ø§Ù‚Ø© Ø¨ÙŠÙ† Ø§Ù„Ø¥Ù†Ø³Ø§Ù† ÙˆØ§Ù„Ø·Ø¨ÙŠØ¹Ø©ØŒ ÙˆÙƒÙŠÙ ÙŠÙ…ÙƒÙ† Ù„Ù„Ø£Ø­Ù„Ø§Ù… Ø£Ù† ØªØªØ­Ù‚Ù‚ ÙÙŠ Ø£Ø­Ø¶Ø§Ù† Ø§Ù„Ø·Ø¨ÙŠØ¹Ø© Ø§Ù„Ø¬Ù…ÙŠÙ„Ø©.",
          coverColor: "from-[#27ae60] to-[#219a52]",
          icon: "ğŸŒ´",
          pdfUrl: "https://drive.google.com/file/d/1DENRQFgDnfbJIsGpH82VeuBgZ5qfRvCh/preview",
        },
      ].map((b) => ({ ...b, pdfUrl: toDrivePreviewUrl(b.pdfUrl) }));

      let currentFilter = "all";
      let searchQuery = "";

      function renderBooks() {
        const grid = document.getElementById("books-grid");
        const noResults = document.getElementById("no-results");
        const countEl = document.getElementById("books-count");

        let filteredBooks = books;

        if (currentFilter !== "all") filteredBooks = filteredBooks.filter((book) => book.category === currentFilter);

        if (searchQuery) {
          const query = searchQuery.toLowerCase();
          filteredBooks = filteredBooks.filter(
            (book) =>
              book.title.toLowerCase().includes(query) ||
              book.author.toLowerCase().includes(query) ||
              book.description.toLowerCase().includes(query)
          );
        }

        countEl.textContent = filteredBooks.length;

        if (filteredBooks.length === 0) {
          grid.classList.add("hidden");
          noResults.classList.remove("hidden");
          return;
        }

        grid.classList.remove("hidden");
        noResults.classList.add("hidden");

        grid.innerHTML = filteredBooks
          .map(
            (book, index) => `
          <div class="book-card bg-white rounded-3xl shadow-lg overflow-hidden animate-fade-in" style="animation-delay: ${index * 0.1}s;">
            <div class="book-cover h-48 bg-gradient-to-br ${book.coverColor} flex items-center justify-center relative">
              <div class="text-6xl">${book.icon}</div>
              <div class="absolute top-3 right-3 bg-white/20 backdrop-blur-sm text-white text-xs px-3 py-1 rounded-full">
                ${book.categoryName}
              </div>
            </div>

            <div class="p-5">
              <h3 class="text-lg font-bold text-[#1a4d3e] mb-1 line-clamp-1">${book.title}</h3>
              <p class="text-sm text-[#d4a853] font-medium mb-3">${book.author}</p>
              <p class="text-sm text-[#666] line-clamp-2 mb-4 leading-relaxed">${book.description}</p>

              <div class="flex gap-2">
                <button onclick="openBookDetail(${book.id})" class="flex-1 btn-primary text-white py-3 rounded-xl font-medium">
                  Ù‚Ø±Ø§Ø¡Ø©
                </button>
                <button onclick="downloadBook(${book.id})" class="btn-secondary text-white py-3 px-4 rounded-xl font-medium" title="ØªØ­Ù…ÙŠÙ„">
                  ØªØ­Ù…ÙŠÙ„
                </button>
              </div>
            </div>
          </div>
        `
          )
          .join("");
      }

      function filterByCategory(category) {
        currentFilter = category;

        document.querySelectorAll(".category-btn").forEach((btn) => {
          btn.classList.remove("active");
          if (btn.dataset.category === category) btn.classList.add("active");
        });

        const titles = {
          all: "Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒØªØ¨",
          school: "Ù‚ØµØµ Ù…Ø¯Ø±Ø³ÙŠØ©",
          adventure: "Ø®ÙŠØ§Ù„ ÙˆÙ…ØºØ§Ù…Ø±Ø§Øª",
          environmental: "Ù‚ØµØµ Ø¨ÙŠØ¦ÙŠØ© ÙˆØªÙˆØ¹ÙˆÙŠØ©",
        };
        document.getElementById("section-title").textContent = titles[category] || "Ø£Ø­Ø¯Ø« Ø§Ù„ÙƒØªØ¨";

        renderBooks();
        document.getElementById("books-section").scrollIntoView({ behavior: "smooth" });
      }

      function handleSearch(query) {
        searchQuery = query;
        renderBooks();
      }

      function openBookDetail(bookId) {
        const book = books.find((b) => b.id === bookId);
        if (!book) return;

        const modal = document.getElementById("book-modal");
        const modalTitle = document.getElementById("modal-title");
        const modalContent = document.getElementById("modal-content");

        modalTitle.textContent = book.title;

        const previewUrl = toDrivePreviewUrl(book.pdfUrl);
        const viewUrl = toDriveViewUrl(book.pdfUrl);
        const downloadUrl = toDriveDownloadUrl(book.pdfUrl);

        modalContent.innerHTML = `
          <div class="space-y-4">
            <div class="flex items-center justify-between flex-wrap gap-2">
              <div>
                <div class="text-[#1a4d3e] font-bold text-2xl">${book.title}</div>
                <div class="text-[#d4a853] font-bold mt-1">Ø§Ù„ÙƒØ§ØªØ¨: ${book.author}</div>
              </div>
              <div class="flex gap-2">
                <button onclick="downloadPDF('${downloadUrl}', '${book.title}')" class="btn-secondary text-white px-4 py-2 rounded-xl font-bold">ØªØ­Ù…ÙŠÙ„</button>
                <button onclick="openPdfInNewTab('${viewUrl}')" class="btn-primary text-white px-4 py-2 rounded-xl font-bold">ÙØªØ­ Ø¨Ù…Ù„Ø¡ Ø§Ù„Ø´Ø§Ø´Ø©</button>
              </div>
            </div>

            <p class="text-[#555] leading-relaxed">${book.description}</p>

            <div class="pdf-viewer bg-[#f5f0e6] rounded-2xl overflow-hidden">
              <iframe src="${previewUrl}" class="w-full" style="height: 520px; border: none;" title="Ù…Ø¹Ø§ÙŠÙ†Ø© ${book.title}"></iframe>
            </div>
          </div>
        `;

        modal.classList.remove("hidden");
        document.body.style.overflow = "hidden";
      }

      function closeModal() {
        document.getElementById("book-modal").classList.add("hidden");
        document.body.style.overflow = "";
      }

      function downloadPDF(downloadUrl, bookTitle) {
        const link = document.createElement("a");
        link.href = downloadUrl;
        link.download = `${bookTitle}.pdf`;
        link.target = "_blank";
        link.rel = "noopener noreferrer";
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        showNotification("Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒØªØ§Ø¨... " + bookTitle);
      }

      function downloadBook(bookId) {
        const book = books.find((b) => b.id === bookId);
        if (!book) return;
        downloadPDF(toDriveDownloadUrl(book.pdfUrl), book.title);
      }

      function openPdfInNewTab(viewUrl) {
        window.open(viewUrl, "_blank", "noopener,noreferrer");
      }

      function showNotification(message) {
        const notification = document.createElement("div");
        notification.className =
          "fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 bg-[#1a4d3e] text-white p-4 rounded-2xl shadow-2xl z-50 animate-fade-in";
        notification.textContent = message;
        document.body.appendChild(notification);
        setTimeout(() => notification.remove(), 2500);
      }

      function showHome() {
        currentFilter = "all";
        searchQuery = "";
        document.getElementById("search-input").value = "";
        document.getElementById("section-title").textContent = "Ø£Ø­Ø¯Ø« Ø§Ù„ÙƒØªØ¨";

        document.querySelectorAll(".category-btn").forEach((btn) => {
          btn.classList.remove("active");
          if (btn.dataset.category === "all") btn.classList.add("active");
        });

        renderBooks();
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      function toggleMobileMenu() {
        document.getElementById("mobile-menu").classList.toggle("hidden");
      }

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") closeModal();
      });

      renderBooks();
    </script>
  </body>
</html>
